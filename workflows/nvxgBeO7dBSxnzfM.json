{
  "id": "nvxgBeO7dBSxnzfM",
  "name": "Telegram 等待发送 Webhook",
  "nodes": [
    {
      "parameters": {
        "format": "resolved",
        "options": {
          "customEmailConfig": "[\"UNSEEN\"]",
          "forceReconnect": 60
        }
      },
      "id": "ec71314b-e1a5-4106-a279-c9fe1154ac89",
      "name": "Email Trigger (IMAP)",
      "type": "n8n-nodes-base.emailReadImap",
      "position": [
        -112,
        176
      ],
      "typeVersion": 2,
      "credentials": {
        "imap": {
          "id": "JBEHpP9Ib66wsWRt",
          "name": "qq mail IMAP account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "<Your Chat ID Here>",
        "text": "=📧 <b>You've got mail!</b>\n\nA new email has arrived from this address: <code>{{ $node[\"Email Trigger (IMAP)\"].json[\"from\"][\"value\"][\"0\"][\"address\"] }}</code>\n\n🌐 A secert HTML page has been created for it, where you can preview the message by following the link below 👇",
        "replyMarkup": "inlineKeyboard",
        "inlineKeyboard": {
          "rows": [
            {
              "row": {
                "buttons": [
                  {
                    "text": "={{ $('Github Gist').item.json.files[\"email.html\"].filename }}",
                    "additionalFields": {
                      "url": "={{'http://emails.nskha.com/?iloven8n=nskha&id='+ $('Github Gist').item.json.id}}"
                    }
                  }
                ]
              }
            }
          ]
        },
        "additionalFields": {
          "appendAttribution": true,
          "disable_web_page_preview": true,
          "parse_mode": "HTML"
        }
      },
      "id": "5f727cd3-b9c1-4141-b897-76a3caf9005f",
      "name": "Telegram",
      "type": "n8n-nodes-base.telegram",
      "position": [
        496,
        176
      ],
      "typeVersion": 1.1,
      "webhookId": "d3102c15-81eb-4a8b-9a15-1e037cde4729",
      "credentials": {
        "telegramApi": {
          "id": "VrYACtaKqGe6OxmW",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.github.com/gists",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "githubApi",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Accept",
              "value": "application/vnd.github+json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"description\": \"{{ $json.date }} - from {{ JSON.stringify($json.from.value[0].address).slice(1, -1) }} - to {{ JSON.stringify($json.to.value[0].address).slice(1, -1) }}\",\n  \"public\": false,\n  \"files\": {\n    \"email.html\": {\n      \"content\": \"{{ JSON.stringify($json.html).slice(1, -1) }}\"\n    }\n  }\n}",
        "options": {
          "redirect": {
            "redirect": {}
          }
        }
      },
      "id": "f1faaeb4-315c-4d4f-9ad4-a222c2658c0b",
      "name": "Github Gist",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        192,
        176
      ],
      "notesInFlow": true,
      "typeVersion": 4.1,
      "credentials": {
        "githubApi": {
          "id": "JboZ15lyRBfzRd6A",
          "name": "GitHub account"
        }
      },
      "notes": "Save HTML content"
    },
    {
      "parameters": {
        "content": "## Simple Conversion of Emails into HTML Webpages\nTo-do:\n* Configure your GitHub credentials through `Predefined Credential Type` => `GitHub API`.\n* Add your Telegram credentials by providing your `Chat ID`.\n* [**Optional**] You can host this [small project](https://github.com/Automations-Project/Emails/tree/main) on your own domain using GitHub Pages.\n\n ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌  ‌ ‌ ‌  ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ![image](https://cdn.statically.io/gh/Automations-Project/Emails/main/iloven8n.min.svg)\n\n\n\n\n\n\n\n ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌  ‌ ‌ ‌  ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ![image](https://cdn.statically.io/gh/Automations-Project/Emails/main/iloven8n%E2%80%8C.min.svg)",
        "height": 626.9128738621571,
        "width": 872,
        "color": 7
      },
      "id": "39bcf9fa-4bce-44c9-978d-b13aa3ac368b",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -192,
        -48
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "amount": 3
      },
      "id": "79cbc29c-8e50-4b12-953d-c2bec9cba8ac",
      "name": "Wait",
      "type": "n8n-nodes-base.wait",
      "position": [
        -112,
        416
      ],
      "webhookId": "c5202512-f84e-44b4-b357-9ee2124bd507",
      "notesInFlow": true,
      "typeVersion": 1,
      "notes": "Delete within 3h"
    },
    {
      "parameters": {
        "operation": "deleteMessage",
        "chatId": "<Your Chat ID Here>",
        "messageId": "={{ $('Telegram').item.json.result.message_id }}"
      },
      "id": "b9cb9c52-1998-4984-8a02-4458f07aa2da",
      "name": "Telegram ‌",
      "type": "n8n-nodes-base.telegram",
      "position": [
        496,
        416
      ],
      "typeVersion": 1.1,
      "webhookId": "c6df235b-24dc-4c1a-9fff-9fe102c070e5",
      "credentials": {
        "telegramApi": {
          "id": "VrYACtaKqGe6OxmW",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "method": "DELETE",
        "url": "=https://api.github.com/gists/{{ $item(\"0\").$node[\"Github Gist\"].json[\"id\"] }}",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "githubApi",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Accept",
              "value": "application/vnd.github+json"
            }
          ]
        },
        "options": {
          "redirect": {
            "redirect": {}
          }
        }
      },
      "id": "c9ea9e43-75dc-4035-bcf9-06f60750fb2d",
      "name": "Github Gist ‌",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        192,
        416
      ],
      "notesInFlow": true,
      "typeVersion": 4.1,
      "credentials": {
        "githubApi": {
          "id": "JboZ15lyRBfzRd6A",
          "name": "GitHub account"
        }
      },
      "notes": "Remove HTML content"
    }
  ],
  "connections": {
    "Wait": {
      "main": [
        [
          {
            "node": "Github Gist ‌",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Telegram": {
      "main": [
        [
          {
            "node": "Wait",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Github Gist": {
      "main": [
        [
          {
            "node": "Telegram",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Github Gist ‌": {
      "main": [
        [
          {
            "node": "Telegram ‌",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Email Trigger (IMAP)": {
      "main": [
        [
          {
            "node": "Github Gist",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "triggerCount": 0,
  "versionId": "f9d6d709-4fba-4621-860b-96b991f019cb",
  "owner": {
    "type": "personal",
    "projectId": "z4xrzX6UbOdfRzVH",
    "projectName": "小刚 王 <767937116@qq.com>",
    "personalEmail": "767937116@qq.com"
  },
  "parentFolderId": null,
  "isArchived": true
}